-- Create storage bucket for avatars
INSERT INTO storage.buckets (id, name, public) 
VALUES ('avatars', 'avatars', true);

-- Create storage bucket for class images
INSERT INTO storage.buckets (id, name, public) 
VALUES ('class-images', 'class-images', true);

-- Storage policies for avatars
CREATE POLICY "Avatar images are publicly accessible"
ON storage.objects FOR SELECT
USING (bucket_id = 'avatars');

CREATE POLICY "Users can upload their own avatar"
ON storage.objects FOR INSERT
WITH CHECK (
  bucket_id = 'avatars' 
  AND auth.uid()::text = (storage.foldername(name))[1]
);

CREATE POLICY "Users can update their own avatar"
ON storage.objects FOR UPDATE
USING (
  bucket_id = 'avatars' 
  AND auth.uid()::text = (storage.foldername(name))[1]
);

CREATE POLICY "Users can delete their own avatar"
ON storage.objects FOR DELETE
USING (
  bucket_id = 'avatars' 
  AND auth.uid()::text = (storage.foldername(name))[1]
);

-- Storage policies for class images
CREATE POLICY "Class images are publicly accessible"
ON storage.objects FOR SELECT
USING (bucket_id = 'class-images');

-- Add avatar_url to profiles
ALTER TABLE public.profiles 
ADD COLUMN avatar_url TEXT;

-- Create classes table
CREATE TABLE public.classes (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  image_url TEXT,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);

ALTER TABLE public.classes ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Classes are viewable by everyone"
ON public.classes FOR SELECT
USING (true);

-- Create class_schedules table
CREATE TABLE public.class_schedules (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  class_id UUID NOT NULL REFERENCES public.classes(id) ON DELETE CASCADE,
  day_of_week INTEGER NOT NULL CHECK (day_of_week >= 0 AND day_of_week <= 6),
  start_time TIME NOT NULL,
  duration_minutes INTEGER NOT NULL,
  max_capacity INTEGER NOT NULL DEFAULT 20,
  week_start_date DATE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);

ALTER TABLE public.class_schedules ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Class schedules are viewable by everyone"
ON public.class_schedules FOR SELECT
USING (true);

-- Create class_bookings table
CREATE TABLE public.class_bookings (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  schedule_id UUID NOT NULL REFERENCES public.class_schedules(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES public.profiles(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  UNIQUE(schedule_id, user_id)
);

ALTER TABLE public.class_bookings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view all bookings"
ON public.class_bookings FOR SELECT
USING (true);

CREATE POLICY "Users can create their own bookings"
ON public.class_bookings FOR INSERT
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete their own bookings"
ON public.class_bookings FOR DELETE
USING (auth.uid() = user_id);

-- Create trigger for classes updated_at
CREATE TRIGGER update_classes_updated_at
BEFORE UPDATE ON public.classes
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- Create trigger for class_schedules updated_at
CREATE TRIGGER update_class_schedules_updated_at
BEFORE UPDATE ON public.class_schedules
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- Insert some sample classes
INSERT INTO public.classes (name, description, image_url) VALUES
('Spinning', 'Clase de ciclismo indoor de alta intensidad', 'https://images.unsplash.com/photo-1601422407692-ec4eeec1d9b3?w=500'),
('Yoga', 'Práctica de yoga para todos los niveles', 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=500'),
('Pilates', 'Fortalecimiento del core y flexibilidad', 'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=500'),
('Quemagrasa/GAP', 'Glúteos, abdominales y piernas', 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEhUTExMWFhUXFxUVFhcVGBcVFRUVFxgXFxUVFRcYHSggGBolGxUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGhAQGy0lICUtLS8tLS0vLS0tLS0tLSstLS0tLS0tLS0tLS0tLS0rLS0tKy0tLS0tLy0tLS0tLS0tLf/AABEIAJ8BPgMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAGAgMEBQcBAAj/xABEEAABAwEFBAcGAQsDBQEBAAABAgMRAAQFEiExBkFRYRMicYGRobEHMkJSwdFiFBUjJDNygpKi4fBDU7Jjc8LS8RYX/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/EAC4RAAICAQMDAwMDBAMAAAAAAAABAhEDEiExBBNRFEFhIjJxBdHwgaGxwRUjM//aAAwDAQACEQMRAD8AuX7CoVEW0d4qSb1kyoacKcVbkEfes5pK0tCmlM8DU9xSTpUNShUIMLJqK+sgUt61J0GdR3AsgZaz60yiI5EdxykAk6VIbs2cmuuWhKefZT0JY2LPvNKXhGppGJatMhSkWcb86DdBSbEleIyBHZTrTRmTToFdpHJsdQS3PCnHNTTYpZpRz1dArwroFAh6u0oJpQTUIeSmvBFOJFeioQRFcinIpKjFQAuzamn01GsjgKjHCpSEknKo9ho7kZaeuO+oarZhJTvFXX5uXIUYAridn2lqJW44J+RKZ8ST6VFOPkLhLwUa7Wd5A7aiu21PNXbkKv702DdAS5Z3EuNqMSvqqR+9PhuPKp92ezgZF90n8KNPE1dHG5cFMsijyAzluUch4J+9TbBs9bH/AHGiAfiV1R4mtXuzZ2zMfs2kzxIlXiatwkVcsCXJTLqH7GL2243LI4G3SFEgLyzETEZ9lans7Bs7cbhHgYoX9pLX6RlXFKh4EEetEexy8VmHInzg/WjjSjOSXwTK9UIstiK5FRbRe9mQYU+0k8CtIPhNLst4su/s3UK/dUD6Gr7M9EkClhFcApq03g22QFrAJ91OqlfupGZ7qjYUDXtHYmzJV8qx5yPrXdgHsTBHAj0qZtb+ksbnVMABWeRyM6bu+qP2cPe+nlPn/eqeMv5Rc98X4YcRTiGwaRFdFXMpRkS3qZctIFQ3HuFLs1mKzWHSbNR3plE5U6thStSas7PdgSMSyEDnr4Ui0W9CSQ0J/Er6CmoTUNIscCTkOdO2q0I6NGESRI86rVuKV7xmpIPVT3+tRtBUWRHEqXqcuFLbsoHOnSKUg0jbHUUIwUgipJptaaQYaNeFKw0oJqBEinlIzrwTT7qM+4elAgwBSwmuryE0yp49lAI+BSopj8qSOdNuWs8gOdSiWSyYpty0pFVptQJiSrsyFSbFdVqe/ZtEDiR9TTxg3wK5Jcnl2o9g50yhSnFYUBTiuCRTLV1vuvBlIlWYUTomDmSdwo4u2wosTeHFKjBWs5SdwHBI3CsfV9ZHp4+W/Yuw4XllSKWz2AsEB3CFKE4UmcI5neeynLRaQNKrNsLWQ4laSYKY8NfpVF+diqB2Cq8EpZsamzZLGsLoM27cVACaILO2AlJoDZUQuKMk2iGgeAFM1RAjudwHG2YhQKu/Qn08K9YrWlLc5RmRVHZXTjCgYVhVh7SlSQPEg91UW1FtBUmzpd6NDcdIoHMmOqgHkMz2iqc2aerHHG6du/wq/cr7CblfGxoCbejf96jW2/mWxqVH5UiT9hQGxfjDaQkKLitxzJNWtgUF9ZWpzjcPvW5dblXJS+gx/JH2mvc2hsFLH6UfskKhYGKJLkQBlOUnOqS0XwWWC0+hSl9VWBBcSiSAlQXJzEgmNOQowbYSCYAEkkkATJ3zrSLVcbSkleqt5OYqvvOUtUi7txhj0RMys15Nr6imxGQ4QTpHKuNo6JcZxJw8RvyjfTG0ljCXekEAYgBwkqiabcvNafcRjOImFfFkEpUTuQIPMmeFbYyvdGCcXHZl0/tvbTZyyHFBaScLo9+JHUX2A5Hlvqh2b2rcZeLuNxThIxlf6TpBOiicxyjSrm45tDJBbSACqSgRiXEQOzeeyqHa26uhWlYMHCD1eGYjxptTsStjbGNoGLZY3FBYHUUlSVEApVGhFB+y17osrmJcwQdOz+1BOyFoKrQhp4ktLITM5pmYE9oNHdzWFv8AK8DiQoJUQAcxkYzpm5OUX/QCUVGSLxzbdxwxZ7OpXMyf+P3psi93s8mxwkJ+5o5aYSkQlIA5CKXFXaL5b/wUa0uEYYHBuE1Ns9rUB1QE899NM2UCnwiKoZakIWoqzUSe2kRT2GkRSsdCAKfJyFNgV07qUZMUK6BXQKUBQCLQKSoVIQKSpOdKEZCKWluurcAphVpgfeoQkZCvPWhIjsFVL1tHM+QqVY7O4+pCEwnEUiTukxNFRsjdCnrTlwHPKoqVFZhKVLO4JBrSrs9ndnTBeUp08PdT9/Oiix3ayyIabSnsAB8adY2I8i9jHXdm7aGlOqQG0JE5+9HZV5szsY080HXVKUSVCBpkY1o62rTNke/cPlVTsy4sWdKE4MZUpQC1QcJMzhEk0XLHiWqQn1z2RKsdxsNCENJHOJPiamFxIy5TEbqjqefSoYwj+AmFA7oVEHgc99RrdaiDhk5EYTGYxZJJG8BUAjmDvrldT+t6U4440/n9jRi6Ft/U7/A0W0oSrAkAklRj4iVKAk7zIHjQlfLslMmRCkgfiST5qAUKtryt+YJySsQY+EkAGOOaQR2LNBl/XhIJ0UFocgaf7bqRyxokclVwcKnlnqf8s7/TYtB692sbYIzKfPn4ULsWcl5AEQVCeQBkxRbYHgoEGq/8nS3aJHCewmur0eVxk8Y3UwUobku8nQlYNXabWFM68BVVb7tU8iU6jSorDxQ3CsiK2PgxRW5YWi++ignPD1o4kSQO8xQLbLQtalKJlSiSo8STJqVbLRjVkftTjF0hSkIEqW4CEmfdVvUR8oGdGKjC5vx/YM05bITs3ZVuOk7kjL946eH2o4ZfDSPeE0N32hNkd6NiYwJx5yceZP8ASU5c6q2LS2XFpk4VIBIJySqVAkcNE+NH/wBUpe1C1p2Cu1bT9E2tUyqMt4r11bYAS2TjKjMjIe7Jy5ERVe/sgTY0vB0KK0pUErHRYQRJBkmTOVCN3sqQsKEZAjWczrTxxxSfkrlJykq4CfaZSFt4jkCcQjcRuNAl528qgA8SezRI7gPEmiB4qUkpUZBoRfZIWU6ngN9XYPBm6yLVMJbq2hW010beRghP7x3gbo+pr1tVOITOHCnPjGJXnNcOz71msyLQ42pKnFdUKEEIECc881LTVQl1UKnM4wT25itEo0YoyCXY9kLcQneHGSOMdIAfWtCtKeivBQ/F6gGhn2QWDpbVJGSEpPfixfSi/bVnBbkq4hCvPCaeT+lP5JH7mvg0JJkA8q7Td2nE0g8UipGCr7MtGOqTFIqQ6nM0jBWY0jMUgpqWG6UhilGIiUUvosh30+4QnWmnbWkJHf60GE6huvLAFIs6H3jDTSldgMeOlRn7O62+G3ElKpEjWKFB1It0N6UlxqprSNKkBqolZJMG7e2UplIzFEGzuwv5Q0l5x3CFCQlIk95NQrzRkRyo62OdP5I2OEjzNWQhbK5ypDd37JWVjMNhR+ZfWPnVBtAAm2pgQIb0y+KjwmgTa8Ragfwp8jV3j8lKd3+A6Ss0501MI0HYKatK4gZ849KkqW4I23QzeVsxAoCSoHIgJkEcCTkBVe9d6lZqaYygiQQoEb+kA6p7BUx+0uYeojPnlQ+/dzr6j+VBPRyCnC4sKHEdWMjwk1nlvyaY2uC8fti+jwqSlW4kqnLtGp8DQ9abbIVAUChJIKkqTKcpw4twUAexNWVnZZZThaQEiZgA5njOpNV15LUZWmSUgnCZgkDQcQdCO+sPUdFinF/TvWzNODLKE14sGbbeSVCJJQAF6H9iuIUBxSYBHDLeaFr5WcZQYOigQZBBAzB3ggJ8O2p2Zx9EZLJLiOKrM71h24SrMfj5VS2hzFoMgTh/CDmU9gM+fGuZ02JQe38/n84PTyS9h6y2lQAg9ZPmNxpX5UpS8R1pmytEkHQj/O8VOttlKFNmIxT5Ru761Y67uyM/VbY+eQq2XvILSRvqu2ybSMccPP8Aw1XWUdE6FJJAOo3VYmz/AJQ5gVmCCo5kZDmM+FXP7tjAtk2wVasspnhxMJHNR3CrGx34zZh1JediJghI3wPwzrGsUxtc4AUsoASkZkDTv4mqvZ1sF4ToM6OTF3I/Xx4/cMMlfb7miezS6lWt8uvDElJxuYhIUoklKYPE59g51pL+yFgWZNlaniEhJ/pipGzV0ps1nShIzPXWeK1a+GQ7qta348aUd0cnPncp3F7AZbfZzZF6LfSMzhDmJOe4YgTWV3Xsmyp4N4lIIWRIgx1oIg6iD5V9D1jLg6O3ODg456lVHRFNbAWabTt8cBd//MbFEEu8+sBPgMu6ru5tk7HZR+hYQk71RKlfvKOZq8QZAPKuxTxSjwimc5T+52ZX7YGitJHwpDSQPxLUtR/4o8KxgMz0gPM9sZ+s1u3tUZlpQ+ZxEc8LZVHkaw5SgH1g5AlXmCMvI0s3uPBbGr+wiydV9zsR9au/aczC2V8lDwII+tQPYQv9C+ngsd/VTFEntLs+JhCvlc9QR9qMvsAvvLbZdzFZkHhIq1w0ObBPg2eCdD9BV4/eLKPedQntUB9ae/cqrczRyyVDfATrV+tEmqK8LHidSmYkhPZJqNDWMKfG6pd3WJ5+Utp7ToBRlYNk7M2BiBWfxaeAypWzrYQ46AIE5DkCaKgBzKBOwZKSXXIMaJ+5pnZO5GVOQtOPCkkBWYnFrFaC8rqnsNCeyX7ZX7v/AJGikhHJhWygIEJAA4ARWbbVwbeo9n/EVpdZttKn9dV3egoSWwYcikDMVKUMqjt6inluVTAvmVl5K9DRlsSZsiO1XrQVeap8DRHsY1aF2YBDiEIlWeHEvXPfAqyD3ZVNbBhQJt08gOpOIe7Bg6dtFH5hSr9q665yKsKf5UQKGtsbqabwYG0pBkGBrkdad8bCRqy6s+0KVpT0TTzhgaJwp0+ZUCoz99qS5gdQGyUghOLEYMwSeOtEN3NjokR8qfShb2iXOtSE2hsEqbEKjXBrPdn40J8DQqy2RakxJOvOoNrtorN7Df6wv9ISAPdTun5lceQq3/PaVb9aoLy/XeI3THKvJtgOnoaoScei1Jz+GPrUthIHE9pqBK2+bmLa02hgGBiS4hPvdGskqKI+UqKo8NIobZu9a3EhIxKWqAAPeUTuHnWhMO8fH71eXAplCs220qMw4EpCs9QVawayT6RSmnF15Oji/UZY4PUrfsR7g2ObYZPTIbW6ZzjEEjcE4t++az3aJP7E81D0+1bctORrDtqlkONpAmFLn+aB6GtWTFHHBKKMWHNPLl1TdnfyVa1JABiNauLqZwvK5IjxP9qi3LfiEuhtYiRlNXdrQEvAjRSQfpWTCv8AsVm7qJVjaM52t/bucgB409sLYsbqBHvLQj+ZQH1qJtav9ZdG8lI7gBV9sPaU2dbbiklQSrEQIkwDGvOKtlzXyLF/Tfhf6PoGvVn1o9oTh/Z2dI5rWT5AfWqq1bZW9ei0N/uIBPiomtWpHLUJGrVke0rYTeLvNaT/ADITUC1XjanPftLp7FFI8ExVeEJTnizmSSZM8ZOdJKaY8YNcm43W9iZbVxQk+QrlpvVhv33UJ7VCsUVeUgJ6RagNBKiB2DSmem4IV6etF5PgCxfIRe1e/WXW0BlYVhViJTuhtxIM/wAYrGbSqV4hvI/+eINGN+PHCUqTAKDvk5a+SqDlASAM+sPP/wCULsfSlsHHsy2jespfQ3hOPCrrAmIJBIg/iFE97bQWm0JwuuDDM4QAkSNOdZvsiiXTJIlCtMswRlRWuzoG6TzM0G3wFJcj4tKUiOkgcAox4CkC0o3AnsBNQrJaAEnGEgidI041IRb0kwDnGLu40tBs0NQg1UrEvt/vp9atHjVQFw8k69ZPrWxmQ0kaVR3IqXnuR+pqxLrx91sDmtX0FDVxWRxdofl0pzzCMpzPGiVhXaVgJMkDI60GbM3i2h1RUrVJAgFRMK4CiddzMwSpOMwc1kq9dKodkWEh5UAe7/5GoH2Ls3mtX7NhZ5rhCfPPyoDv9TptZKwEqkSAZGg31qMVnG1Sf1093oKWXA0OTiTT4NMinKpgXzIF4j0NF3s/V+qj95VCV5bqKPZyZs6uSz6CnhyyqfCCrFQttsJCO36GiqKGdtRCEHgoU4i5Lu5npYaP4E+lKva8UssrcVokGOZOQHjUK4bQn8maJUB1RqQKBvaXtGlUMNqlKc1EZgq/sKk9iRtgfbn231EEYHJJHBXYRv5VUqUpBqO7aeChlnrT/wCXpcELyV8249vA1VRfZNsV7lJz0oisd6JVoaA3ZSYNKatBTmDQomo1Bh4GrGyubp7Oygq6LxICel6uL3RmVr7EjOOdFNme03adtKOXlu2leYaGFsORkVKURA3SAM6y/aR8qebUcseKY0BxT9a0gtSCCJBGffWd7ZXfgKAZgKIB5KEpP9NCbbW4+JKM7Q7bruxISv4gQJq76ZXQJx+8mR3RVNYbWVsFKveTEx61dvvYrMJ1yPqKwwbU1+Tp5t8bAL8h6R5RUc8R1q8uUylxQA6ug76pLSrAVnfJqwsTpRZVqGpKfMgVc92Ut/S/wWpccO9I8TSSTvcPdAqhNrUYz+T/AJFJphNoVxPweThSfKtGk5+sIFlveSe0modvvZhkBRTMmBAk5a1UKWc8zof6HPtVff6OoP8AuLjsMGiokciyc2zSPdaPeQPSorm2Lx91KB4mhmuoOdNpRXrZd2u8nXkS4ob8gIy1+gqIy2ccdn1pVmBWJy5cBwFSLMkByI0APbkf87qRui+KumMOrUlJIMEHceOev+a1Jui+Xi4lKlkpOWf3pm2mGyCM5SrPsKSPIeFVlmPWBHEc4p48FU3Ug5ceBVh4gjtyqqRacAaV/wBNSD/CoV5BAUgqXOE8QPKoNtdSUBIUmQ4sjP4TnQI2zdFqmqtJ/WEf9xHrUpdogTVS2+DaEZ/6iPWtEihGtgZUPXAP1m0do9TV6t9CRmoDtIoX2ftrYtNoONMHQyIOZqChW4nI9lCeyp/TrH4T/wAquLVtFZUgy8meAM+lBN17QIs7ynCkqSQRlrrI1oWkGmzTAKzfbEfrnh6VMf8AaDPuNfzH6ChK+r9cddxqSMWvAZUrkh4xZdOuBIkmAN9V7O0VmUrCHBPfHjQ1eNtL09IrIfDMDw31VkIT7oHdVcdiySsOn7e2s4UqBIqXs/f7tlbUhKUmVYpM5d1AV2vwueRq8srTjslttbgGuEEgeFFt3sCl7hRadrLUr/USj91I+s1U2q8XHCMbq19unhpVFan3QOqhIiZKyEhPbNTNlEG0LK1vIWlBB6Ns+9zUoxlO4UHfuxqSfAR3PduIdItJj4EnfzI4VnN4vqUtUkzJ3A7+2tOtV5knDhCRx6UDwASaGmLubaW44yVKUqZKiJROeUetBbEasA1gqOESo8AmT4Cp1h2ZtLmeANp+ZzqeCdT4UUt36W1EPI1yxgAKjt399S0vNL6yHMXJWtHUDQVtk2aYQIdWtzkmEIB7TKvCray2SyIiLM2eajiPbKqiO2gDI/5/hr3SpNLY2lFpa7vsql4+jwOqEJWlRAVwCoOXCaiotyUAkBWAEpUQQotkahwQCN+cnSkCCCk5gjwqM20MfXUUORCXRmFjcl4b8spqWGg1u+2oIAxA9UHhI4gVS+0K78VkLqfghXHKc/v41Hu9tKThKYE6A9VKvmbOqeyiW3YTZlhRlJThM8DkZqE4Mvu93PktPnRHZgVWUneMvOg+wjAcB1QoQfwqoqszZcs9oaBOJTa4jXFBiOcxWKa0zV+TqKWvE2vdAsGekWUxnw7qfvP9DZsJBgqSIGvH6VYbD7O2xSUrcaUnQy4cJInWD1tDwoh2z2JtFqaSlgthSVAnEopBABGRCTxq9p9z4M3cj2nvvRmjVpSEj4QJABOfvBQnzrjltbz64+OO9QUPrXL82MvCyJKnrOroxqtEONjmop93vih6tNGCy+dvJsznr0m75ojzqPb7elQ6POQqeXu1UUq2e+DxCT5VKJZyuCvGuURSxatOEJSDlqfrVnZUiSTn6xB+hND2KT4VbWG0kmAdBHaSCPtVU47GjFPeme2gEKHAJHnmf85VSIWRImri1rC5B1IlPJUZpPI6iqROpp4cFeX7rHa9XAa9TFZuD1qyqpfzMzXVuVGdORNO3YB11+dST+8SfWo6rRzqgXfR0w0z+c1cBS0SwlTaedJctQ040P2a0vOLCG04lKyAFWV53PbmcJWhMnclQUR2jdQoKZZptfAVS386VKmd1O2HpSSFoVi5CfSpr2zlpdIMJQni4Y/pGflQGBQqzFWtjsrjpCW0FRjcMh2nQd9FN3XRY7OMTsurG/RsHkn7zT9s2hQBDfVT4D7VLsi2K6wbJrBlx1KeSZWfHIetGN4vCx2FLbZUFLGESAk5iVq0GcT4iha6bxL76G0mSo5xwGZOXIVI2ut/SP4NUIGBO8Yp65B7cv4aFbluNWDF+hSmFAayFQPiSNR3a91Srk2j6RASrJQKQdwOYGIUy64QNJ5DUcdaqX8IJUQJ+ZPVV/fsNScVIactE20+eQxftCcyDnVa1exQ4dSIH2qjdtpgKKgOHEjkKgrvEzMedCiq0g4XeDTqTIHMHWqt+zNAyhRT2Ghw3gOB9KQ7bjBjCSBJBnKppYdSCE3gRkTi9a4L05UKJt7i5jCIBOnDtphi8VyZUT5elRQYryJLYNUX0Rupab74iaClW9Z+M9xikG2L+dXias7D8iLP8B4m/wAgzEc//tO27aMuILYX1SQTnrGgrOHLUo6kntpxlwYSdT/mdGOKK5Ys8s5KlsFKXpc/eGHvGY+tGd1LKVoUNFJB+9Z/ZUkWcL0Kjlywn7+lHmzzoUwhROhOW8Tu8/KsPV05No6n6faxqLCxi8VYiOBivXzfa7OgPDNKYxj8M5kc4qElBCpgwQM/Knr/ALuW7ZVIAP6TCgRqApSQVcoBJ7q8zNZe87ur534OnpxpLZBey6SAdQRPcazz2gezNu0JVaLEgNviVKaEBD3HCNEr8jv41ojCAlISNAAPCnBWzB1ubC1bteH+5ysmKMuNj5IUkgkEEEGCDkQRqCNxr1s+A/hHka0j223Ahi0otLYgWiekA0DqY638SfNBO+s2tPuJ/iH1r0qd0zB5PKrlKXu7BSJogO0+xasOgExE51HmvTUasidcDvSEkk6mmHHJOevHj20sGmXfeqEscrtJFdmiA1WaSvQ9lOYDwpC0KgwCaloNAM7qe2kpNWBuh8k9Q0pFxvfLRtC0y32EeCXXFZSEgCdYJzjwFP3req1POEn4jHpUW5rofacCynKCDvy4+VI2gGB5WUYwhcd2fmDS+5bDZC9nLZiDhW6tACsRCVEFWXVEDXSrS1bSnsB360EYCk9RUTuM+HOi2x7FWtSEmIkSQoxHKKGlJ2TU3FLwQn7xUogY8ZOg4cNaqrW4pRz8z96LE+z+1ERjQnvP0rjfswc+J9I7ATRtCUx7ZBkWexu2sQXF/o2zrhGIJkHjMn+EVBcdASJyPPL/ADOiO8LoNmu1TIVi6JaVYuIUsKJw7oxnwoaaViRE99BGiNRipUVT6hiznXeAcjAwyOcVW2u0nHEkAZETlkdw3AfSrKzWJTz6GVSkFUkjOAJMjjkDRvdlw2ItIU7ZiXSkFwHEevHW3xrRbSKactzLrTJ6x4qE8YjP0qKTW1Cw2RMBNkRlpITl40oFCfdYaT3J+gpdaD22Yu20o6JUewE1ZvXQpQVgbdOUDqKk+Vaqq2KGgbHYKiu3g58w7hU7ge0Zjd2zdoIzZcE8o9aaGx9sJP6KBulSR9a0dy2OH4j3R9qhuOLJ+I95odwPaAk7HWkfIO1X2FQrVcS0GFLR3SaOltKPwE+NRnLpUoz0flU7rB2UAa7vj4x3CvWQhsqkTlAndR1+YVn4PKlt7NqOqPSh3kHsso7Y7LLaRuSD451fbFGEmY62Yz3xw7qor9aLa8BEQB4RlXdmHz0vRjfp2jMf5zrPL6kzdjelo2K51hxMTmB40q+bY405Z1oAheNtSToVxiR4hK6ELqvdLLiekOFJVhkmIO8TU+9Nq2OnNlUStBLakuJPuGQpJn7caz1S4ND+6w1sFqUpCSoQoiSBund3VMDtDd03y28DgWFYSUqA1BGRBFWzb9eVyZ5KTTVFksXgoPavYS/d6ylIJQUEnelIUkqUO4Ad54VhD93KwwIOf0r6L2iOOyvJ+ZIT4kD71mx2eMaeRr1nRdTqwQb8f42ObPB9TM/TdyyBPCuG61ca0AXCY08q8NnjwrT30L6cz/8ANSuIroupXGtC/wDzx+Wui4fwnwqd8npzP03Qfm8q67csn3vKtANxfhPgK6biV8p8qneJ2EAYuZPM0oXKKOxcp4V781H5T5UO98h7K8B2ppkbh5CmibOPlqwcu5oaNpqOWk7gB3VY5UVJWRunYGiQf4ZpKrWjc34JqYG08abLjSfeJ8KTuDaBpu18WyBvJgZVlu2Vux2heHQHCOEDIR51qFvvay4FJClYtwCSMxuzEVk9/WJbbpxaKJUk5SQc4Maa1fjK2/BI2SutNoewqVBSCoZxJGmGOBg91aDs7a3nUKBcnAsoxRmRCVZniMUHsoT2CsymHkvrH6MpUDoSQdIG7MDhWgWW/LK3IQ2pIKiohKUgYjqcuNDI3ewIquTimHPnX3QPpTRsyvxnvNS1bU2f5F+CfvUdza9gf6a/6fvVEtfsi1SiNJskBWNEtqSUuSJOA6njvPcTwrP7VZlWdwtK3ZpVuWg+6sdo15zwo/c23ZH+kv8ApoavS+0qP6IHoySVNOQpInM4Msh+HwjSmxua5Q2uG6H9iboLi3HpHVhCe0gFRHdA7zRkLmUfioZuPaZFnaS0hjQqJlWpUZO6eWe4CrVO2n/RT/Mf/WpJZG9kIpQSqyx//P8AFdLTs6N5Jqmc2wP+0n+ZX/rTK9tF7m0/zK+1L2sj9g92PkIhs+3wrxuRoaihVzbR3/bT4mob+2jvyp8/vUfT5GTvw8hp+amR8I8qQqwsDh4CgJ3bJ75R5/eojm1rx3Dz+9T0mRk9TA0VTLAppblnHCs2XtQ8eHh/eoy9o3eXh/ej6KYPVQNKdtrA0HlTKrxZ5eBrOhtE5y/lFNr2hXuA/lFT0UiergWntDsqXEpfbMlIwrA+TcruPryoDaWQZBIIzBGtXr1+OHhHYM/Kh58YSVJ04cOymWCUVRF1EWxx19ZkFRM5mTqeJ50tuowcBgijLY6xWfCpdpAIMBIIKoA1OQ/yKz58vahqaf4RqxR1ypFFd14O2ZwOtmCNRuUN6VDeK1ayX6laELB95IIG8TuoLvoXVB6IulQ+FMhBPAlYkDsqsu28kqISCSBlAyy4Z1jn0S66npcflqti2XUx6e7d/BrdhtrbwjpAIMajrHec927uqeixA6LnuFZwHZyB0y7KUFqGhPcSPQ10f+PpUnSRiXV/BpSbD2d9KFh5A91Zoq1L/wBxz+dX3pHTqOrzg/iV96HoH5/sH1fwah+TAfBSVMj/AG6zRq0Og5POdyjWnWRRDaApRJwpknMkwMzVOfB2q35LMWbuewyWU/IaSWG/lPnU7pBxrinE8az2Xblaqzt/4KbXZ2+PlVn0g5UhRHLw/tUJuf/Z'Entrenamiento funcional de alta intensidad', 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=500'),
('Musculación', 'Entrenamiento y cardio', 'https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=500');

-- Insert sample schedules for current week
INSERT INTO public.class_schedules (class_id, day_of_week, start_time, duration_minutes, max_capacity, week_start_date)
SELECT 
  c.id,
  (ARRAY[1, 3, 5])[s.day_idx] as day_of_week,
  (ARRAY['09:00', '18:00'])[t.time_idx]::TIME as start_time,
  60 as duration_minutes,
  20 as max_capacity,
  date_trunc('week', CURRENT_DATE)::DATE as week_start_date
FROM public.classes c
CROSS JOIN (
  SELECT generate_series(1, 3) as day_idx
) s
CROSS JOIN (
  SELECT generate_series(1, 2) as time_idx
) t;